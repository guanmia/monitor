webpackJsonp([19],{f4el:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("ZLEe"),i=a.n(l),r=a("3cXf"),o=a.n(r),n=a("rVsN"),s=a.n(n),c=a("HzJ8"),_=a.n(c),d=a("07y0"),m=a("viKb"),u=a("vLgD");a("DEjr");var v={name:"client",components:{},data:function(){return{list:[],total:null,dataForm:{id:null,site_id:null,region_center_id:null,clientName:"",location:[],location_id:null,street:"",transfer_time:null,clear_time:null,heartbeat_interval:null,upload_scan_interval:null,clear_scan_interval:null,console_log_level:"",file_log_level:"",is_log_to_server:"true",log_server_ip:"",log_server_port:null,upload_point_in_time:"",file:null},visible:!1,regionOptions:[],regionNameLists:[],multipleSelection:[],clientids:[],selectclientName:[],operate:0,loading:!0,saveLoading:!1,configList:[],configVisible:!1,moreDetail:!1,moreDetailData:{},log_levels:["DEBUG","INFO","WARNING","ERROR","CRITICAL"],search:"",listQuery:{searchkeys:{clientnames:[],regionids:[]},page:1,limit:20},rules:{site_id:[{required:!0,message:this.$t("client.site_idMsg"),trigger:"blur"}],region_center_id:[{required:!0,message:this.$t("region.regionNameMsg"),trigger:"change"}],clientName:[{required:!0,message:this.$t("client.clientNameMsg"),trigger:"blur"}],location:[{required:!0,message:this.$t("client.locationMsg"),trigger:"change"}],log_server_ip:[{required:!0,message:this.$t("client.log_server_ipMsg"),trigger:"blur"},{validator:m.a.ipRule,message:this.$t("region.ipRule"),trigger:"blur"}],log_server_port:[{required:!0,message:this.$t("client.log_server_portMsg"),trigger:"blur"},{validator:m.a.portRule,message:this.$t("region.portRule"),trigger:"blur"}],file:[{required:!0,message:this.$t("client.fileMsg"),trigger:"change"}]}}},computed:{operateTitle:function(){switch(this.operate){case 0:return this.$t("client.createClient");case 1:return this.$t("client.updateClient");case 2:return this.$t("client.createBatch");case 3:return this.$t("client.updateBatch")}}},created:function(){this.getRegionNameLists(),this.getList()},methods:{getRegionNameLists:function(){var e=this;Object(d.e)({page:1,limit:100}).then(function(t){0===t.error_code&&t.data.results.forEach(function(t){e.regionNameLists.push({id:t.id,name:t.regionName})})})},handleExceed:function(e,t){this.$message.warning({message:"只能选择 "+e.length+" 个文件",center:!0})},beforeUpload:function(e){return-1===e.type.indexOf("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")?(this.$message.warning({message:this.$t("client.uploadTip1"),center:!0}),!1):!(e.size/1024>500)||(this.$message.warning({message:this.$t("client.uploadTip2"),center:!0}),!1)},handleChange:function(e,t){},hangleSuccess:function(e,t){this.dataForm.file=t.raw},getLocations:function(e){var t=!0,a=!1,l=void 0;try{for(var i,r=_()(e);!(t=(i=r.next()).done);t=!0){var o=i.value,n=[],s=!0,c=!1,d=void 0;try{for(var m,u=_()(o.children);!(s=(m=u.next()).done);s=!0){var v=m.value,p=[],f=!0,g=!1,b=void 0;try{for(var h,F=_()(v.children);!(f=(h=F.next()).done);f=!0){var $=h.value;p.push({value:$.location_id,label:$.location})}}catch(e){g=!0,b=e}finally{try{!f&&F.return&&F.return()}finally{if(g)throw b}}n.push({value:v.location_id,label:v.location})}}catch(e){c=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(c)throw d}}this.regionOptions.push({value:o.location_id,label:o.location,children:n})}}catch(e){a=!0,l=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw l}}},addressChange:function(e){this.dataForm.location_id=e},getLocation:function(e){var t=this;return new s.a(function(a,l){Object(d.c)().then(function(l){if(0==l.error_code){t.locationList=l.data,t.getLocations(t.locationList);var i=!0,r=!1,o=void 0;try{for(var n,s=_()(e);!(i=(n=s.next()).done);i=!0){var c=n.value;c.location=[];var d=!0,m=!1,u=void 0;try{for(var v,p=_()(t.locationList);!(d=(v=p.next()).done);d=!0){var f=v.value;if(c.location_id==f.location_id)c.location.push({value:f.location_id,label:f.location});else{var g=!0,b=!1,h=void 0;try{for(var F,$=_()(f.children);!(g=(F=$.next()).done);g=!0){var y=F.value;if(c.location_id==y.location_id)c.location.push({value:f.location_id,label:f.location},{value:y.location_id,label:y.location});else{var k=!0,x=!1,w=void 0;try{for(var D,C=_()(y.children);!(k=(D=C.next()).done);k=!0){var N=D.value;c.location_id==N.location_id&&c.location.push({value:f.location_id,label:f.location},{value:y.location_id,label:y.location},{value:N.location_id,label:N.location})}}catch(e){x=!0,w=e}finally{try{!k&&C.return&&C.return()}finally{if(x)throw w}}}}}catch(e){b=!0,h=e}finally{try{!g&&$.return&&$.return()}finally{if(b)throw h}}}}}catch(e){m=!0,u=e}finally{try{!d&&p.return&&p.return()}finally{if(m)throw u}}}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}a(e)}}).catch(function(e){console.log(e)})})},getList:function(){var e,t,a=this;if(this.loading=!0,""!==this.search){var l=this.search.split(" ");this.listQuery.searchkeys.clientnames=l}(e=this.listQuery,t=o()(e.searchkeys),e={page:e.page,limit:e.limit,searchkeys:t},Object(u.a)({url:"/admin/client/list",method:"post",data:e})).then(function(e){if(0===e.error_code){if("{}"!==o()(e.data)){var t=e.data.results;a.getLocation(t).then(function(e){a.list=e,a.getStatus(a.list).then(function(e){a.list=e,a.list.forEach(function(e){e.clear_time=Math.floor(e.clear_time/86400),e.clear_scan_interval=Math.floor(e.clear_scan_interval/86400)})})}),a.total=e.data.total}else a.list=[];a.loading=!1}})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},getStatus:function(e){return new s.a(function(t,a){Object(u.a)({url:"/admin/client/status",method:"get"}).then(function(a){if(0===a.error_code){var l=a.data;e.forEach(function(e){e.status={file_num:0},l.forEach(function(t){t.site_id==e.site_id&&(e.status.file_num=t.file_num)})}),t(e)}}).catch(function(e){a(e)})})},moreDetailFn:function(e){var t=this;this.list.forEach(function(a){a.id===e&&(t.moreDetailData=a)}),this.moreDetail=!this.moreDetail},handleCreate:function(){this.visible=!0,this.operate=0},editRow:function(e){var t,a=this;(t={id:e},Object(u.a)({url:"/admin/client/getinfo",method:"get",params:t})).then(function(e){0===e.error_code&&(a.dataForm=e.data,a.dataForm.location=[],a.dataForm.clear_time=Math.floor(a.dataForm.clear_time/86400),a.dataForm.clear_scan_interval=Math.floor(a.dataForm.clear_scan_interval/86400),a.list.forEach(function(e){a.dataForm.location_id==e.location_id&&e.location.forEach(function(e){a.dataForm.location.push(e.value)})}),a.operate=1,a.visible=!0)})},viewConfig:function(e){var t,a=this;(t={site_id:e},Object(u.a)({url:"/admin/client/site",method:"get",params:t})).then(function(e){if(0===e.error_code)if(0!==i()(e.data).length){var t=e.data.results;a.getLocation(t).then(function(e){a.configList=e,a.configVisible=!0})}else a.$message.warning({message:"暂时没有配置记录！",center:!0})})},addBatchRow:function(){this.visible=!0,this.operate=2},handleSelectionChange:function(e){this.multipleSelection=e},editBatchRow:function(){var e=this;this.clientids=[],this.selectclientName=[],this.multipleSelection.forEach(function(t,a,l){e.clientids.push(t.id),e.selectclientName.push(t.clientName)}),this.clientids.length>0?(this.operate=3,this.visible=!0):this.$message.warning({message:"您还没有选中客户端数据！",center:!0,duration:1200})},saveForm:function(){var e=this;this.$refs.dataForm.validate(function(t){var a,l,i,r,n,s;t&&(e.saveLoading=!0,e.dataForm.location_id=e.dataForm.location[e.dataForm.location.length-1],e.dataForm.clear_time=60*e.dataForm.clear_time*60*24,e.dataForm.clear_scan_interval=60*e.dataForm.clear_scan_interval*60*24,0===e.operate?(delete e.dataForm.file,e.dataForm.clear_time=60*e.dataForm.clear_time*60*24,e.dataForm.clear_scan_interval=60*e.dataForm.clear_scan_interval*60*24,(s=e.dataForm,Object(u.a)({url:"/admin/client/create",method:"post",data:s})).then(function(t){0===t.error_code&&(e.$notify({title:e.$t("table.success"),message:e.$t("table.createSuccess"),type:"success",duration:2e3}),e.getList(),e.resetForm())})):1===e.operate?(delete e.dataForm.file,(n=e.dataForm,Object(u.a)({url:"/admin/client/update",method:"post",data:n})).then(function(t){0===t.error_code&&(e.$notify({title:e.$t("table.success"),message:e.$t("table.updateSuccess"),type:"success",duration:2e3}),e.getList(),e.resetForm())})):2===e.operate?(console.log(e.dataForm.file),e.dataForm={region_center_id:e.dataForm.region_center_id,file:e.dataForm.file},(i=e.dataForm,r=new FormData,r.append("region_center_id",i.region_center_id),r.append("file",i.file),console.log(r.get("file")),Object(u.a)({url:"/admin/client/createBatch",method:"post",data:r})).then(function(t){0===t.error_code&&(e.$notify({title:e.$t("table.success"),message:e.$t("client.createBatchSuccess"),type:"success",duration:2e3}),e.getList(),e.resetForm())})):3===e.operate&&(e.dataForm={clientids:e.clientids,region_center_id:e.dataForm.region_center_id,transfer_time:e.dataForm.transfer_time,clear_time:e.dataForm.clear_time,heartbeat_interval:e.dataForm.heartbeat_interval,upload_scan_interval:e.dataForm.upload_scan_interval,clear_scan_interval:e.dataForm.clear_scan_interval,console_log_level:e.dataForm.console_log_level,file_log_level:e.dataForm.file_log_level,is_log_to_server:e.dataForm.is_log_to_server,log_server_ip:e.dataForm.log_server_ip,log_server_port:e.dataForm.log_server_port,xupload_point_in_time:e.dataForm.upload_point_in_time},console.log(e.dataForm),(a=e.dataForm,l=o()(a.clientids),a.clientids=l,Object(u.a)({url:"/admin/client/updateBatch",method:"post",data:a})).then(function(t){0===t.error_code&&(delete e.dataForm.clientids,e.$notify({title:e.$t("table.success"),message:e.$t("client.updateBatchSuccess"),type:"success",duration:2e3}),e.getList(),e.resetForm())})))})},deleteRow:function(e){var t=this;this.$confirm(this.$t("table.deleteNote"),this.$t("table.note"),{confirmButtonText:this.$t("table.delete"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then(function(){var a;(a={id:e},Object(u.a)({url:"/admin/client/delete",method:"post",data:a})).then(function(e){0===e.error_code&&(t.$notify({title:t.$t("table.success"),message:t.$t("table.deleteSuccess"),type:"success",duration:2e3}),t.getList())})}).catch(function(){})},handleClose:function(){this.resetForm()},resetForm:function(){var e=this;setTimeout(function(){e.$refs.dataForm.resetFields(),e.dataForm={id:null,site_id:null,region_center_id:null,clientName:null,location:[],location_id:null,street:"",transfer_time:null,clear_time:null,heartbeat_interval:null,upload_scan_interval:null,clear_scan_interval:null,console_log_level:"",file_log_level:"",is_log_to_server:"true",log_server_ip:"",log_server_port:null,upload_point_in_time:"",file:null}},100),this.visible=!1,this.saveLoading=!1}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client"},[a("div",{staticClass:"dataForm"},[a("el-dialog",{attrs:{title:e.operateTitle,visible:e.visible,closeOnClickModal:!1,beforeClose:e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[0===e.operate||1===e.operate?a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,labelWidth:"200px"}},[a("el-form-item",{attrs:{label:e.$t("client.site_id"),prop:"site_id"}},[0===e.operate?a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.site_id,callback:function(t){e.$set(e.dataForm,"site_id",t)},expression:"dataForm.site_id"}}):a("p",[e._v(e._s(e.dataForm.site_id))])],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.regionName"),prop:"region_center_id"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dataForm.region_center_id,callback:function(t){e.$set(e.dataForm,"region_center_id",t)},expression:"dataForm.region_center_id"}},e._l(e.regionNameLists,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clientName"),prop:"clientName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.clientName,callback:function(t){e.$set(e.dataForm,"clientName",t)},expression:"dataForm.clientName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.location"),prop:"location"}},[a("el-cascader",{attrs:{options:e.regionOptions,clearable:""},on:{change:e.addressChange},model:{value:e.dataForm.location,callback:function(t){e.$set(e.dataForm,"location",t)},expression:"dataForm.location"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.street"),prop:"street"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.street,callback:function(t){e.$set(e.dataForm,"street",t)},expression:"dataForm.street"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.transfer_time"),prop:"transfer_time"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.transfer_time,callback:function(t){e.$set(e.dataForm,"transfer_time",t)},expression:"dataForm.transfer_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_time"),prop:"clear_time"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.clear_time,callback:function(t){e.$set(e.dataForm,"clear_time",t)},expression:"dataForm.clear_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.heartbeat_interval"),prop:"heartbeat_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.heartbeat_interval,callback:function(t){e.$set(e.dataForm,"heartbeat_interval",t)},expression:"dataForm.heartbeat_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_scan_interval"),prop:"upload_scan_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.upload_scan_interval,callback:function(t){e.$set(e.dataForm,"upload_scan_interval",t)},expression:"dataForm.upload_scan_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_scan_interval"),prop:"clear_scan_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.clear_scan_interval,callback:function(t){e.$set(e.dataForm,"clear_scan_interval",t)},expression:"dataForm.clear_scan_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.console_log_level"),prop:"console_log_level"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dataForm.console_log_level,callback:function(t){e.$set(e.dataForm,"console_log_level",t)},expression:"dataForm.console_log_level"}},e._l(e.log_levels,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.file_log_level"),prop:"file_log_level"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dataForm.file_log_level,callback:function(t){e.$set(e.dataForm,"file_log_level",t)},expression:"dataForm.file_log_level"}},e._l(e.log_levels,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.is_log_to_server"),prop:"is_log_to_server"}},[a("el-radio-group",{model:{value:e.dataForm.is_log_to_server,callback:function(t){e.$set(e.dataForm,"is_log_to_server",t)},expression:"dataForm.is_log_to_server"}},[a("el-radio",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("否")])],1)],1),e._v(" "),"true"===e.dataForm.is_log_to_server?a("el-form-item",{attrs:{label:e.$t("client.log_server_ip"),prop:"log_server_ip"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.log_server_ip,callback:function(t){e.$set(e.dataForm,"log_server_ip",t)},expression:"dataForm.log_server_ip"}})],1):e._e(),e._v(" "),"true"===e.dataForm.is_log_to_server?a("el-form-item",{attrs:{label:e.$t("client.log_server_port"),prop:"log_server_port"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.log_server_port,callback:function(t){e.$set(e.dataForm,"log_server_port",t)},expression:"dataForm.log_server_port"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_point_in_time"),prop:"upload_point_in_time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss"},model:{value:e.dataForm.upload_point_in_time,callback:function(t){e.$set(e.dataForm,"upload_point_in_time",t)},expression:"dataForm.upload_point_in_time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveForm}},[e._v(e._s(e.$t("table.save")))]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v(e._s(e.$t("table.cancel")))])],1)],1):2===e.operate?a("el-form",{ref:"dataForm",staticClass:"upload-file",attrs:{model:e.dataForm,rules:e.rules,labelWidth:"150px"}},[a("el-form-item",{attrs:{placeholder:e.$t("client.regionName"),prop:"region_center_id"}},[a("el-select",{attrs:{placeholder:e.$t("client.regionName"),clearable:""},model:{value:e.dataForm.region_center_id,callback:function(t){e.$set(e.dataForm,"region_center_id",t)},expression:"dataForm.region_center_id"}},e._l(e.regionNameLists,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"file"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","auto-upload":!0,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,"on-change":e.handleChange,"on-success":e.hangleSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text",domProps:{innerHTML:e._s(e.$t("client.uploadText"))}}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},domProps:{innerHTML:e._s(e.$t("client.uploadTip"))},slot:"tip"})])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveForm}},[e._v(e._s(e.$t("table.save")))]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v(e._s(e.$t("table.cancel")))])],1)],1):3===e.operate?a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,labelWidth:"200px"}},[a("el-form-item",{attrs:{label:e.$t("client.regionName"),prop:"region_center_id"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dataForm.region_center_id,callback:function(t){e.$set(e.dataForm,"region_center_id",t)},expression:"dataForm.region_center_id"}},e._l(e.regionNameLists,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.transfer_time"),prop:"transfer_time"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.transfer_time,callback:function(t){e.$set(e.dataForm,"transfer_time",t)},expression:"dataForm.transfer_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_time"),prop:"clear_time"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.clear_time,callback:function(t){e.$set(e.dataForm,"clear_time",t)},expression:"dataForm.clear_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.heartbeat_interval"),prop:"heartbeat_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.heartbeat_interval,callback:function(t){e.$set(e.dataForm,"heartbeat_interval",t)},expression:"dataForm.heartbeat_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_scan_interval"),prop:"upload_scan_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.upload_scan_interval,callback:function(t){e.$set(e.dataForm,"upload_scan_interval",t)},expression:"dataForm.upload_scan_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_scan_interval"),prop:"clear_scan_interval"}},[a("el-input-number",{attrs:{min:0,max:31536e3,clearable:""},model:{value:e.dataForm.clear_scan_interval,callback:function(t){e.$set(e.dataForm,"clear_scan_interval",t)},expression:"dataForm.clear_scan_interval"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.console_log_level"),prop:"console_log_level"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.console_log_level,callback:function(t){e.$set(e.dataForm,"console_log_level",t)},expression:"dataForm.console_log_level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.file_log_level"),prop:"file_log_level"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.file_log_level,callback:function(t){e.$set(e.dataForm,"file_log_level",t)},expression:"dataForm.file_log_level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.is_log_to_server"),prop:"is_log_to_server"}},[a("el-radio-group",{model:{value:e.dataForm.is_log_to_server,callback:function(t){e.$set(e.dataForm,"is_log_to_server",t)},expression:"dataForm.is_log_to_server"}},[a("el-radio",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.log_server_ip"),prop:"log_server_ip"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.log_server_ip,callback:function(t){e.$set(e.dataForm,"log_server_ip",t)},expression:"dataForm.log_server_ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.log_server_port"),prop:"log_server_port"}},[a("el-input",{attrs:{clearable:""},model:{value:e.dataForm.log_server_port,callback:function(t){e.$set(e.dataForm,"log_server_port",t)},expression:"dataForm.log_server_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_point_in_time"),prop:"upload_point_in_time"}},[a("el-time-picker",{model:{value:e.dataForm.upload_point_in_time,callback:function(t){e.$set(e.dataForm,"upload_point_in_time",t)},expression:"dataForm.upload_point_in_time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveForm}},[e._v(e._s(e.$t("table.save")))]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v(e._s(e.$t("table.cancel")))])],1)],1):e._e()],1)],1),e._v(" "),a("el-dialog",{staticClass:"config",attrs:{title:"配置记录",visible:e.configVisible},on:{"update:visible":function(t){e.configVisible=t}}},[a("table",{attrs:{border:"1"}},[a("tr",[a("th",[e._v(e._s(e.$t("client.regionName")))]),e._v(" "),a("th",[e._v(e._s(e.$t("client.clientName")))]),e._v(" "),a("th",[e._v(e._s(e.$t("client.location")))]),e._v(" "),a("th",[e._v(e._s(e.$t("client.addTime")))]),e._v(" "),a("th",[e._v(e._s(e.$t("client.newConfigTime")))]),e._v(" "),a("th",[e._v(e._s(e.$t("client.status")))])]),e._v(" "),e._l(e.configList,function(t){return a("tr",[a("td",[e._v(e._s(t.regionName))]),e._v(" "),a("td",[e._v(e._s(t.clientName))]),e._v(" "),a("td",[e._v("\n            "+e._s(t.location[0]?t.location[0].label:"")+" \n            "+e._s(t.location[1]?t.location[1].label:"")+" \n            "+e._s(t.location[2]?t.location[2].label:"")+" \n          ")]),e._v(" "),a("td",[e._v(e._s(t.addTime))]),e._v(" "),a("td",[e._v(e._s(t.newConfigTime))]),e._v(" "),a("td",[e._v(e._s(t.status))])])})],2)]),e._v(" "),a("el-dialog",{staticClass:"moreDetail",attrs:{title:e.moreDetailData.regionName+"的配置详情",visible:e.moreDetail},on:{"update:visible":function(t){e.moreDetail=t}}},[a("el-form",{attrs:{model:e.moreDetailData,labelWidth:"250px"}},[a("el-form-item",{attrs:{label:e.$t("client.transfer_time")+"："}},[a("p",[e._v(e._s(e.moreDetailData.transfer_time))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_time")+"："}},[a("p",[e._v(e._s(e.moreDetailData.clear_time))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.heartbeat_interval")+"："}},[a("p",[e._v(e._s(e.moreDetailData.heartbeat_interval))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_scan_interval")+"："}},[a("p",[e._v(e._s(e.moreDetailData.upload_scan_interval))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.clear_scan_interval")+"："}},[a("p",[e._v(e._s(e.moreDetailData.clear_scan_interval))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.console_log_level")+"："}},[a("p",[e._v(e._s(e.moreDetailData.console_log_level))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.file_log_level")+"："}},[a("p",[e._v(e._s(e.moreDetailData.file_log_level))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.is_log_to_server")+"："}},[a("p",[e._v(e._s(e.moreDetailData.is_log_to_server))])]),e._v(" "),"true"===e.moreDetailData.is_log_to_server?a("el-form-item",{attrs:{label:e.$t("client.log_server_ip")+"："}},[a("p",[e._v(e._s(e.moreDetailData.log_server_ip))])]):e._e(),e._v(" "),"true"===e.moreDetailData.is_log_to_server?a("el-form-item",{attrs:{label:e.$t("client.log_server_port")+"："}},[a("p",[e._v(e._s(e.moreDetailData.log_server_port))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.upload_point_in_time")+"："}},[a("p",[e._v(e._s(e.moreDetailData.upload_point_in_time))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.client_ver")+"："}},[a("p",[e._v(e._s(e.moreDetailData.client_ver))])]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("client.config_ver")+"："}},[a("p",[e._v(e._s(e.moreDetailData.config_ver))])])],1)],1),e._v(" "),a("div",{staticClass:"title"},[a("h2",[e._v(e._s(e.generateTitle("client")))]),e._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:e.$t("client.search"),title:e.$t("client.search"),prefixIcon:"el-icon-search",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-select",{attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:e.$t("client.chooseRegion")},model:{value:e.listQuery.searchkeys.regionids,callback:function(t){e.$set(e.listQuery.searchkeys,"regionids",t)},expression:"listQuery.searchkeys.regionids"}},e._l(e.regionNameLists,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download",loading:e.$store.getters.downloadLoading},on:{click:function(t){e.handleDownload(e.list[0],e.list,e.$t("title")+"-"+e.generateTitle("client"))}}},[e._v(e._s(e.$t("table.export")))])],1),e._v(" "),e.checkRole()?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))]):e._e(),e._v(" "),e.checkRole()?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addBatchRow}},[e._v(e._s(e.$t("client.createBatch")))]):e._e(),e._v(" "),e.checkRole()?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:e.editBatchRow}},[e._v(e._s(e.$t("client.updateBatch")))]):e._e()],1),e._v(" "),a("main",{staticClass:"list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"site_id",label:e.$t("client.site_id"),width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"regionName",label:e.$t("client.regionName")}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",label:e.$t("client.clientName")}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:e.$t("client.location")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.location[0]?t.row.location[0].label:"")+" \n                "+e._s(t.row.location[1]?t.row.location[1].label:"")+" \n                "+e._s(t.row.location[2]?t.row.location[2].label:"")+" \n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addTime",label:e.$t("client.addTime")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.addTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"newConfigTime",label:e.$t("client.newConfigTime")}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:e.$t("client.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("文件数量： "),a("span",{staticClass:"blue"},[e._v(e._s(t.row.status.file_num))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("client.actions"),width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"action"},[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-view"},on:{click:function(a){e.moreDetailFn(t.row.id)}}},[e._v("详细配置")]),e._v(" "),e.checkRole()?a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(a){a.preventDefault(),e.deleteRow(t.row.id)}}},[e._v(e._s(e.$t("table.delete")))]):e._e()],1),e._v(" "),a("div",{staticClass:"action"},[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-view"},on:{click:function(a){e.viewConfig(t.row.site_id)}}},[e._v(e._s(e.$t("client.viewConfig")))]),e._v(" "),e.checkRole()?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editRow(t.row.id)}}},[e._v(e._s(e.$t("table.edit")))]):e._e()],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,50,100],"page-size":e.listQuery.limit,layout:"total,sizes,prev,pager,next,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1)},staticRenderFns:[]};var f=a("X4nt")(v,p,!1,function(e){a("fYpT")},null,null);t.default=f.exports},fYpT:function(e,t){}});
//# sourceMappingURL=19.684f77ff161eacc4f15a.js.map