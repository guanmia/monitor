{"version":3,"sources":["webpack:///src/views/User.vue","webpack:///./src/views/User.vue?8f8a","webpack:///./src/views/User.vue"],"names":["User","validator","rules","usernameRule","trigger","emailRule","phoneRule","status","getList","_this","this","results","total","tableListsChange","val","_this2","username","index","listQuery","limit","page","usernameReg","test","item","_this3","id","data","_this4","roles","resetForm","_this5","then","res","catch","_this6","introduction","_this7","_this8","resetFields","views_User","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","operate","$t","visible","closeOnClickModal","beforeClose","handleClose","on","update:visible","$event","ref","model","dataForm","labelWidth","label","prop","value","callback","$$v","$set","expression","_v","type","_e","_s","placeholder","rows","loading","saveLoading","click","saveForm","detailTitle","detailVisible","detail","generateTitle","prefixIcon","clearable","nativeOn","keyup","_k","keyCode","key","handleFilter","search","directives","name","rawName","icon","$store","getters","downloadLoading","handleDownload","list","checkRole","handleCreate","staticStyle","width","currentTableLists","border","min-width","scopedSlots","_u","fn","scope","_f","row","detailClick","size","editRow","preventDefault","deleteRow","resetPwd","undefined","background","current-page","page-sizes","page-size","layout","size-change","handleSizeChange","current-change","handleCurrentChange","update:currentPage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.23161304f618da3d9311.js","sourcesContent":["<template>\n    <div class='user'>\n\n        <div class=\"dataForm\">\n            <el-dialog :title=\"operate === 0 ? $t('user.createUser') : $t('user.updateUser')\" :visible.sync=\"visible\" :closeOnClickModal=\"false\" :beforeClose=\"handleClose\">\n                <el-form :model=\"dataForm\" ref=\"dataForm\" :rules=\"rules\" labelWidth=\"150px\">\n                    <!-- <el-form-item :label=\"$t('user.id')\" v-show=\"dataForm.id\">\n                        <p>{{dataForm.id}}</p>\n                    </el-form-item> -->\n                    <el-form-item :label=\"$t('user.username')\" prop=\"username\">\n                        <el-input v-model=\"dataForm.username\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('user.password')\" prop=\"password\" v-if='operate === 0'>\n                        <el-input v-model=\"dataForm.password\" type='password'></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('user.email')\" prop=\"email\">\n                        <el-input v-model=\"dataForm.email\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('user.phone')\" prop=\"phone\">\n                        <el-input v-model=\"dataForm.phone\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('user.roles')\" prop=\"roles\">\n                        <el-radio-group v-model=\"dataForm.roles[0]\">\n                            <el-radio label=\"admin\">{{$t('user.admin')}}</el-radio>\n                            <el-radio label=\"user\">{{$t('user.user')}}</el-radio>\n                        </el-radio-group>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('user.introduction')\" prop=\"introduction\">\n                        <el-input type='textarea' v-model='dataForm.introduction' :placeholder=\"$t('user.enterIntro')\" :rows='4'></el-input>\n                    </el-form-item>\n                    <el-form-item >\n                        <el-button type=\"primary\" @click=\"saveForm\" :loading='saveLoading'>{{$t('table.save')}}</el-button>\n                        <el-button type=\"info\" @click=\"resetForm\">{{$t('table.cancel')}}</el-button>\n                    </el-form-item>\n                </el-form>\n            </el-dialog>\n        </div>\n\n        <el-dialog :title='detailTitle' :visible.sync='detailVisible'>\n          <p>{{detail}}</p>\n        </el-dialog>\n\n        <div class=\"title\">\n            <h2>{{generateTitle('users')}} <el-tag type=\"warning\">{{$t('user.superAdmin')}} </el-tag></h2>\n            <div class=\"search\">\n                <el-input v-model=\"search\" :placeholder=\"$t('user.search')\" :title=\"$t('user.search')\" prefixIcon=\"el-icon-search\" @keyup.enter.native=\"handleFilter\" clearable></el-input>\n                <el-button v-waves type=\"primary\" @click=\"handleFilter\" icon=\"el-icon-search\">{{$t('table.search')}}</el-button>\n                <el-button v-waves type=\"primary\" icon=\"el-icon-download\" :loading='$store.getters.downloadLoading' @click=\"handleDownload(list[0],list,$t('title')+'-'+generateTitle('users'))\">{{$t('table.export')}}</el-button>\n            </div>\n            <el-button v-waves type=\"primary\" @click=\"handleCreate\" icon=\"el-icon-plus\" v-if='checkRole()'>{{$t('table.add')}}</el-button>\n        </div>\n\n        <main class=\"tableLists\">\n            <el-table :data=\"currentTableLists\" border style=\"width:100%\" v-loading=\"loading\">\n                <!-- <el-table-column prop=\"id\" :label=\"$t('user.id')\" width='60'></el-table-column> -->\n                <el-table-column prop=\"username\" :label=\"$t('user.username')\"></el-table-column>\n                <el-table-column prop=\"email\" :label=\"$t('user.email')\" min-width=\"200\"></el-table-column>\n                <el-table-column prop=\"phone\" :label=\"$t('user.phone')\"></el-table-column>\n                <el-table-column prop=\"roles\" :label=\"$t('user.roles')\">\n                    <template slot-scope=\"scope\">\n                        <el-tag :type=\"scope.row.roles | rolesFilter\">{{scope.row.roles[0] === 'admin' ? $t('user.admin') : $t('user.user')}}</el-tag>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"introduction\" :label=\"$t('user.introduction')\">\n                    <template slot-scope='scope'>\n                        <el-button @click='detailClick(scope.row.id)'>{{$t('user.detail')}}</el-button>\n                    </template>\n                </el-table-column>\n                <el-table-column :label=\"$t('user.actions')\" width=\"300\" v-if='checkRole()'>\n                    <template slot-scope=\"scope\" v-if=\"scope.row.username !== 'admin'\">\n                        <el-button type=\"primary\" size=\"mini\" @click=\"editRow(scope.row.id)\" icon=\"el-icon-edit\">{{$t('table.edit')}}</el-button>\n                        <el-button type=\"danger\" size=\"mini\" @click.native.prevent=\"deleteRow(scope.row.id)\" icon=\"el-icon-delete\">{{$t('table.delete')}}</el-button>\n                        <el-button type=\"info\" size=\"mini\" @click.native.prevent=\"resetPwd(scope.row.id)\">{{$t('table.resetPwd')}}</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </main>\n\n        <div class=\"page\">\n            <el-pagination\n                background\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page.sync=\"listQuery.page\"\n                :page-sizes=\"[10,20,50,100]\"\n                :page-size=\"listQuery.limit\"\n                layout=\"total,sizes,prev,pager,next,jumper\"\n                :total=\"total\">\n            </el-pagination>\n        </div>\n\n    </div>\n</template>\n\n<style lang='scss'>\n.user {\n}\n</style>\n\n<script>\nimport rules from \"@/base/rules\";\nimport { parseTime } from \"@/utils\";\nimport {\n  getUserList,\n  createUser,\n  getUserInfo,\n  updateUser,\n  resetUserPwd,\n  deleteUser\n} from \"@/api/user\";\nexport default {\n  name: \"user\",\n  components: {},\n  data() {\n    return {\n      list: null, //表格数据\n      total: null, //数据总数\n      //表单数据\n      dataForm: {\n        id: null,\n        username: \"\",\n        password: \"\",\n        email: \"\",\n        phone: \"\",\n        roles: [\"user\"],\n        introduction: \"\"\n      },\n      visible: false, //表单显示与隐藏\n      editId: 0, //点击修改的是哪个id\n      operate: 0, //判断用户是添加（0）还是修改数据（1）\n      loading: true, //数据加载\n      detailVisible: false, //用户详情的显示与隐藏\n      detailTitle: \"\", //用户详情的标题\n      detail: \"\", //用户详情\n      saveLoading: false, //保存按钮加载\n      //查询条件\n      currentTableLists: [], //前端分页查询数据\n      search: \"\", //用于把字符串转化为对象内容作为请求数据参数\n      listQuery: {\n        searchkeys: {\n          username: []\n        },\n        page: 1, //当前页\n        limit: 10 //一页多少条记录\n      },\n      //表单验证\n      rules: {\n        username: [\n          {\n            required: true,\n            message: this.$t(\"user.usernameMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.usernameRule, trigger: \"blur\" }\n        ],\n        password: [\n          {\n            required: true,\n            message: this.$t(\"user.passwordMsg\"),\n            trigger: \"blur\"\n          }\n          //{ validator: rules.passwordRule, trigger: \"blur\" }\n        ],\n        email: [\n          {\n            required: true,\n            message: this.$t(\"user.emailMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.emailRule, trigger: \"blur\" }\n        ],\n        phone: [\n          {\n            required: true,\n            message: this.$t(\"user.phoneMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.phoneRule, trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  filters: {\n    rolesFilter(status) {\n      const statusMap = {\n        admin: \"warning\",\n        user: \"info\"\n      };\n      return statusMap[status];\n    }\n    // rolesFilter1: status => {\n    //   const statusMap = {\n    //     admin: \"管理员\",\n    //     user: \"普通用户\"\n    //   };\n    //   return statusMap[status];\n    // }\n  },\n  created() {\n    //获取表格数据\n    this.getList();\n  },\n  methods: {\n    //获取数据\n    getList() {\n      this.loading = true;\n\n      //转化username对象\n      // if (this.search !== \"\") {\n      //   let arr = this.search.split(\" \");\n      //   this.listQuery.searchkeys.username = arr;\n      // }\n\n      getUserList({ page: 1, limit: 1000 }).then(res => {\n        if (res.error_code === 0) {\n          this.list = res.data.results;\n          this.total = res.data.total;\n\n          this.tableListsChange();\n\n          //this.loading = false;\n        }\n      });\n    },\n    //点击查询\n    handleFilter() {\n      this.listQuery.page = 1;\n      this.tableListsChange();\n      //this.getList();\n    },\n    //每页多少条记录改变\n    handleSizeChange(val) {\n      this.listQuery.limit = val;\n      this.tableListsChange();\n      //this.getList();\n    },\n    //当前页改变\n    handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.tableListsChange();\n      //this.getList();\n    },\n    //获取当前分页表格数据\n    tableListsChange() {\n      //转化username正则\n      let username = this.search.replace(\" \", \"|\");\n      let usernameReg = new RegExp(username);\n\n      this.currentTableLists = this.list.filter((item, index, self) => {\n        return (\n          index >= this.listQuery.limit * (this.listQuery.page - 1) &&\n          index < this.listQuery.limit * this.listQuery.page &&\n          usernameReg.test(item.username)\n        );\n      });\n      this.loading = false;\n    },\n    //点击添加数据\n    handleCreate() {\n      this.visible = true;\n      this.operate = 0;\n    },\n    //点击更新数据，获取用户信息\n    editRow(id) {\n      this.editId = id;\n      getUserInfo({ id }).then(res => {\n        if (res.error_code === 0) {\n          this.dataForm = res.data;\n          this.operate = 1;\n          this.visible = true;\n        }\n      });\n    },\n    //保存数据\n    saveForm() {\n      this.$refs.dataForm.validate(valid => {\n        if (this.dataForm.username === \"admin\") {\n          this.$message.warning({\n            message: this.$t(\"user.userNote\"),\n            center: true\n          });\n        } else {\n          if (valid) {\n            //保存按钮加载，禁止用户快速连续点击两次问题\n            this.saveLoading = true;\n\n            //把roles=['user'],转化为roles=\"ROLE_USER\"的格式\n            let roles = this.dataForm.roles;\n            roles = roles.join(\",\");\n            roles = roles.replace(\"admin\", \"ROLE_ADMIN\");\n            this.dataForm.roles = roles.replace(\"user\", \"ROLE_USER\");\n\n            if (this.operate === 0) {\n              //添加数据\n              this.dataForm.id = null; //添加不需要id\n              createUser(this.dataForm).then(res => {\n                if (res.error_code === 0) {\n                  this.$notify({\n                    title: this.$t(\"table.success\"),\n                    message: this.$t(\"table.createSuccess\"),\n                    type: \"success\",\n                    duration: 2000\n                  });\n                  this.getList();\n                  this.resetForm();\n                }\n              });\n            } else if (this.operate === 1) {\n              //更新数据\n              this.dataForm.password = null; //更新不需要password\n              updateUser(this.dataForm).then(res => {\n                if (res.error_code === 0) {\n                  this.$notify({\n                    title: this.$t(\"table.success\"),\n                    message: this.$t(\"table.updateSuccess\"),\n                    type: \"success\",\n                    duration: 2000\n                  });\n                  this.getList();\n                  this.resetForm();\n                }\n              });\n            }\n          }\n        }\n      });\n    },\n    //删除数据\n    deleteRow(id) {\n      this.$confirm(this.$t(\"table.deleteNote\"), this.$t(\"table.note\"), {\n        confirmButtonText: this.$t(\"table.delete\"),\n        cancelButtonText: this.$t(\"table.cancel\"),\n        type: \"warning\"\n      })\n        .then(() => {\n          deleteUser({ id }).then(res => {\n            if (res.error_code === 0) {\n              console.log(res);\n              this.$notify({\n                title: this.$t(\"table.success\"),\n                message: this.$t(\"table.deleteSuccess\"),\n                type: \"success\",\n                duration: 2000\n              });\n              this.getList();\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    //点击显示用户详情\n    detailClick(id) {\n      this.list.forEach(item => {\n        if (item.id === id) {\n          this.detailVisible = true;\n          this.detailTitle = item.username + \"的用户详情\";\n          this.detail = item.introduction;\n        }\n      });\n    },\n    //重置用户密码\n    resetPwd(id) {\n      this.$confirm(this.$t(\"table.resetNote\"), this.$t(\"table.note\"), {\n        confirmButtonText: this.$t(\"table.reset\"),\n        cancelButtonText: this.$t(\"table.cancel\"),\n        type: \"warning\"\n      })\n        .then(() => {\n          resetUserPwd({ id, password: \"000000\" }).then(res => {\n            if (res.error_code === 0) {\n              this.$notify({\n                title: this.$t(\"table.success\"),\n                message: this.$t(\"table.resetSuccess\"),\n                type: \"success\",\n                duration: 2000\n              });\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    //关闭表单，并重置表单\n    handleClose() {\n      this.resetForm();\n    },\n    //重置并退出\n    resetForm() {\n      setTimeout(() => {\n        //解决移除校验结果，不能解决第一次点击编辑，初始化问题\n        this.$refs.dataForm.resetFields();\n        //解决第一次点击编辑，初始化问题\n        this.dataForm = {\n          id: null,\n          username: \"\",\n          password: \"\",\n          email: \"\",\n          phone: \"\",\n          roles: [\"user\"],\n          introduction: \"\"\n        };\n      }, 500);\n      this.visible = false;\n      //保存按钮启动\n      this.saveLoading = false;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/User.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"dataForm\"},[_c('el-dialog',{attrs:{\"title\":_vm.operate === 0 ? _vm.$t('user.createUser') : _vm.$t('user.updateUser'),\"visible\":_vm.visible,\"closeOnClickModal\":false,\"beforeClose\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.rules,\"labelWidth\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('user.username'),\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.dataForm.username),callback:function ($$v) {_vm.$set(_vm.dataForm, \"username\", $$v)},expression:\"dataForm.username\"}})],1),_vm._v(\" \"),(_vm.operate === 0)?_c('el-form-item',{attrs:{\"label\":_vm.$t('user.password'),\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.dataForm.password),callback:function ($$v) {_vm.$set(_vm.dataForm, \"password\", $$v)},expression:\"dataForm.password\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.email'),\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.dataForm.email),callback:function ($$v) {_vm.$set(_vm.dataForm, \"email\", $$v)},expression:\"dataForm.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.phone'),\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.dataForm.phone),callback:function ($$v) {_vm.$set(_vm.dataForm, \"phone\", $$v)},expression:\"dataForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.roles'),\"prop\":\"roles\"}},[_c('el-radio-group',{model:{value:(_vm.dataForm.roles[0]),callback:function ($$v) {_vm.$set(_vm.dataForm.roles, 0, $$v)},expression:\"dataForm.roles[0]\"}},[_c('el-radio',{attrs:{\"label\":\"admin\"}},[_vm._v(_vm._s(_vm.$t('user.admin')))]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"user\"}},[_vm._v(_vm._s(_vm.$t('user.user')))])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.introduction'),\"prop\":\"introduction\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.enterIntro'),\"rows\":4},model:{value:(_vm.dataForm.introduction),callback:function ($$v) {_vm.$set(_vm.dataForm, \"introduction\", $$v)},expression:\"dataForm.introduction\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.saveForm}},[_vm._v(_vm._s(_vm.$t('table.save')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.resetForm}},[_vm._v(_vm._s(_vm.$t('table.cancel')))])],1)],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.detailTitle,\"visible\":_vm.detailVisible},on:{\"update:visible\":function($event){_vm.detailVisible=$event}}},[_c('p',[_vm._v(_vm._s(_vm.detail))])]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_c('h2',[_vm._v(_vm._s(_vm.generateTitle('users'))+\" \"),_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(_vm._s(_vm.$t('user.superAdmin'))+\" \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"search\"},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('user.search'),\"title\":_vm.$t('user.search'),\"prefixIcon\":\"el-icon-search\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.handleFilter($event)}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_vm._v(\" \"),_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(_vm._s(_vm.$t('table.search')))]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\",\"loading\":_vm.$store.getters.downloadLoading},on:{\"click\":function($event){_vm.handleDownload(_vm.list[0],_vm.list,_vm.$t('title')+'-'+_vm.generateTitle('users'))}}},[_vm._v(_vm._s(_vm.$t('table.export')))])],1),_vm._v(\" \"),(_vm.checkRole())?_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(_vm._s(_vm.$t('table.add')))]):_vm._e()],1),_vm._v(\" \"),_c('main',{staticClass:\"tableLists\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.currentTableLists,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":_vm.$t('user.username')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":_vm.$t('user.email'),\"min-width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":_vm.$t('user.phone')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roles\",\"label\":_vm.$t('user.roles')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"rolesFilter\")(scope.row.roles)}},[_vm._v(_vm._s(scope.row.roles[0] === 'admin' ? _vm.$t('user.admin') : _vm.$t('user.user')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"introduction\",\"label\":_vm.$t('user.introduction')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{on:{\"click\":function($event){_vm.detailClick(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('user.detail')))])]}}])}),_vm._v(\" \"),(_vm.checkRole())?_c('el-table-column',{attrs:{\"label\":_vm.$t('user.actions'),\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return scope.row.username !== 'admin'?[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.editRow(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('table.edit')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.deleteRow(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('table.delete')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"mini\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.resetPwd(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('table.resetPwd')))])]:undefined}}])}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.listQuery.page,\"page-sizes\":[10,20,50,100],\"page-size\":_vm.listQuery.limit,\"layout\":\"total,sizes,prev,pager,next,jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.listQuery, \"page\", $event)}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-10095673\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/User.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10095673\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./User.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./User.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10095673\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/User.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}