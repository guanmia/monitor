webpackJsonp([12],{IycP:function(t,e){},"Vg/Y":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("HzJ8"),n=i.n(s),l=15,r={name:"scrollPane",data:function(){return{left:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,i=this.$refs.scrollContainer.offsetWidth,s=this.$refs.scrollWrapper.offsetWidth;e>0?this.left=Math.min(0,this.left+e):i-l<s?this.left<-(s-i+l)?this.left=this.left:this.left=Math.max(this.left+e,i-s-l):this.left=0},moveToTarget:function(t){var e=this.$refs.scrollContainer.offsetWidth,i=t.offsetLeft,s=t.offsetWidth;i<-this.left?this.left=-i+l:i+l>-this.left&&i+s<-this.left+e-l||(this.left=-(i-(e-s)+l))}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(e){e.preventDefault(),t.handleScroll(e)}}},[i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{left:t.left+"px"}},[t._t("default")],2)])},staticRenderFns:[]};var a={name:"demo",components:{ScrollPane:i("X4nt")(r,o,!1,function(t){i("t+0j")},"data-v-0e29163e",null).exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{}}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addViewTags(),this.moveToCurrentTag()},visible:function(t){t?window.addEventListener("click",this.closeMenu):window.removeEventListener("click",this.closeMenu)}},mounted:function(){this.addViewTags()},methods:{generateTitle:function(t){return this.$t("route."+t)},generateRoute:function(){return!!this.$route.meta.title&&this.$route},isActive:function(t){return t.path===this.$route.path||t.name===this.$route.meta.title},addViewTags:function(){var t=this.generateRoute();if(!t)return!1;this.$store.dispatch("addVisitedViews",t)},moveToCurrentTag:function(){var t=this,e=this.$refs.tag;this.$nextTick(function(){var i=!0,s=!1,l=void 0;try{for(var r,o=n()(e);!(i=(r=o.next()).done);i=!0){var a=r.value;if(a.to===t.$route.path){t.$refs.scrollPane.moveToTarget(a.$el);break}}}catch(t){s=!0,l=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw l}}})},closeSelectedTag:function(t){var e=this;this.$store.dispatch("delVisitedViews",t).then(function(i){if(e.isActive(t)){var s=i.slice(-1)[0];s?e.$router.push(s.path):e.$router.push("/home")}e.visible=!1})},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag.path),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){t.moveToCurrentTag(),t.visible=!1})},closeAllTags:function(){this.$store.dispatch("delAllViews"),this.$router.push("/"),this.visible=!1},openMenu:function(t,e){console.log(e),this.visible=!0,this.selectedTag=t,this.left=e.clientX,this.top=e.clientY},closeMenu:function(){this.visible=!1}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tags-view-container"},[i("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},t._l(Array.from(t.visitedViews),function(e){return i("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:t.isActive(e)?"active":"",attrs:{to:e.path},nativeOn:{contextmenu:function(i){i.preventDefault(),t.openMenu(e,i)}}},[t._v("\n            "+t._s(t.generateTitle(e.title))+"\n            "),i("span",{staticClass:"el-icon-close",on:{click:function(i){i.preventDefault(),i.stopPropagation(),t.closeSelectedTag(e)}}})])})),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[i("li",{on:{click:function(e){t.closeSelectedTag(t.selectedTag)}}},[t._v("关闭")]),t._v(" "),i("li",{on:{click:t.closeOthersTags}},[t._v("关闭其它")]),t._v(" "),i("li",{on:{click:t.closeAllTags}},[t._v("关闭全部")])])],1)},staticRenderFns:[]};var f=i("X4nt")(a,c,!1,function(t){i("IycP")},"data-v-399d9854",null);e.default=f.exports},"t+0j":function(t,e){}});
//# sourceMappingURL=12.16faf6c37e8264aaae05.js.map