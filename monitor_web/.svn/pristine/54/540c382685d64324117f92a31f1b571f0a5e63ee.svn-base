{"version":3,"sources":["webpack:///src/components/ScrollPane/index.vue","webpack:///./src/components/ScrollPane/index.vue?7263","webpack:///src/views/layout/components/TagsView.vue","webpack:///./src/components/ScrollPane/index.vue","webpack:///./src/utils/i18n.js","webpack:///./src/views/layout/components/TagsView.vue?1fcf","webpack:///./src/views/layout/components/TagsView.vue"],"names":["padding","ScrollPane","scrollContainer","offsetWidth","scrollWrapper","eventDelta","left","offsetLeft","components_ScrollPane","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","on","wheel","$event","preventDefault","handleScroll","style","_t","staticRenderFns","TagsView","__webpack_require__","normalizeComponent","ssrContext","visitedViews","addViewTags","moveToCurrentTag","closeMenu","generateTitle","title","$t","$route","generateRoute","route","_this","tag","_iteratorNormalCompletion","_step","value","$el","_this2","path","_this3","e","clientX","clientY","components_TagsView","_l","Array","from","key","refInFor","class","isActive","attrs","to","nativeOn","contextmenu","openMenu","_v","_s","click","stopPropagation","closeSelectedTag","directives","name","rawName","expression","top","selectedTag","closeOthersTags","closeAllTags","TagsView_Component","TagsView_normalizeComponent","__webpack_exports__"],"mappings":"sJAQAA,EAAA,GAEAC,QAEA,yCAIA,0DAIA,yBACAC,gBACAC,yBACAC,cAEAD,+CAEAE,2CAIAC,wCAEAN,aAGA,6CAKAE,gBACAC,gBACAI,eAEAJ,sCAGAH,2DAMAA,OCnDAQ,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,kBAAAC,YAAA,mBAAAC,IAAyDC,MAAA,SAAAC,GAAyBA,EAAAC,iBAAwBX,EAAAY,aAAAF,OAA2BN,EAAA,OAAYE,IAAA,gBAAAC,YAAA,iBAAAM,OAAyDjB,KAAAI,EAAAJ,KAAA,QAAwBI,EAAAc,GAAA,kBAE3TC,oBC+CjB,IAAAC,QAEA,mBACAzB,WCjDA0B,EAAA,OAcAC,CACA3B,EACAO,GATA,EAVA,SAAAqB,GACAF,EAAA,SAaA,kBAEA,MAUA,yCD6BA,MACA,OACA,uFAOAG,6CAKAC,mBACAC,+EAIAC,mDAEAA,qCAKAF,wBAGAG,cE7EO,SAAuBC,GAC1B,OAAOxB,KAAKyB,GAAG,SAASD,kEF+E5BE,yFAKAF,yCAGAG,6BAEA,yCAEAC,gCAEA,IAAAC,EAAA7B,kBACA8B,8BACA,IAAAC,GAAA,oEACA,IAAAD,EAAAE,EAAAC,8BACA,mCACAC,KACA,sHAKA,IAAAC,EAAAnC,iFAEA,mBACA,sBAEAoC,qBAEA,oBAGA,gCAGA,IAAAC,EAAArC,wCACAoC,gFAEAf,8BACA,kDAIA,iCACA,mBACA,sCAGAiB,iBACA,mBACAR,cACAS,mBACAC,4CAGA,KG9IAC,GADiB3C,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,YAAA,wBAAkCH,EAAA,eAAoBE,IAAA,aAAAC,YAAA,qBAAiDP,EAAA2C,GAAAC,MAAAC,KAAA7C,EAAAoB,cAAA,SAAAW,GAAqD,OAAA3B,EAAA,eAAyB0C,IAAAf,EAAAM,KAAA/B,IAAA,MAAAyC,UAAA,EAAAxC,YAAA,iBAAAyC,MAAAhD,EAAAiD,SAAAlB,GAAA,YAAAmB,OAAiHC,GAAApB,EAAAM,MAAce,UAAWC,YAAA,SAAA3C,GAA+BA,EAAAC,iBAAwBX,EAAAsD,SAAAvB,EAAArB,OAA2BV,EAAAuD,GAAA,iBAAAvD,EAAAwD,GAAAxD,EAAAwB,cAAAO,EAAAN,QAAA,kBAAArB,EAAA,QAA4FG,YAAA,gBAAAC,IAAgCiD,MAAA,SAAA/C,GAAyBA,EAAAC,iBAAwBD,EAAAgD,kBAAyB1D,EAAA2D,iBAAA5B,YAAgC/B,EAAAuD,GAAA,KAAAnD,EAAA,MAAwBwD,aAAaC,KAAA,OAAAC,QAAA,SAAA5B,MAAAlC,EAAA,QAAA+D,WAAA,YAAsExD,YAAA,cAAAM,OAAoCjB,KAAAI,EAAAJ,KAAA,KAAAoE,IAAAhE,EAAAgE,IAAA,QAAwC5D,EAAA,MAAWI,IAAIiD,MAAA,SAAA/C,GAAyBV,EAAA2D,iBAAA3D,EAAAiE,iBAAwCjE,EAAAuD,GAAA,QAAAvD,EAAAuD,GAAA,KAAAnD,EAAA,MAAsCI,IAAIiD,MAAAzD,EAAAkE,mBAA6BlE,EAAAuD,GAAA,UAAAvD,EAAAuD,GAAA,KAAAnD,EAAA,MAAwCI,IAAIiD,MAAAzD,EAAAmE,gBAA0BnE,EAAAuD,GAAA,iBAEpmCxC,oBCCjB,IAcAqD,EAdAnD,EAAA,OAcAoD,CACArD,EACA0B,GATA,EAVA,SAAAvB,GACAF,EAAA,SAaA,kBAEA,MAUAqD,EAAA,QAAAF,EAAA","file":"static/js/12.16faf6c37e8264aaae05.js","sourcesContent":["<template>\n  <div class=\"scroll-container\" ref=\"scrollContainer\" @wheel.prevent=\"handleScroll\">\n    <div class=\"scroll-wrapper\" ref=\"scrollWrapper\" :style=\"{left: left + 'px'}\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nconst padding = 15; // tag's padding\n\nexport default {\n  name: 'scrollPane',\n  data() {\n    return {\n      left: 0\n    }\n  },\n  methods: {\n    handleScroll(e) {\n      const eventDelta = e.wheelDelta || -e.deltaY * 3;\n      const $container = this.$refs.scrollContainer;\n      const $containerWidth = $container.offsetWidth;\n      const $wrapper = this.$refs.scrollWrapper;\n      const $wrapperWidth = $wrapper.offsetWidth;\n\n      if (eventDelta > 0) {\n        this.left = Math.min(0, this.left + eventDelta)\n      } else {\n        if ($containerWidth - padding < $wrapperWidth) {\n          if (this.left < -($wrapperWidth - $containerWidth + padding)) {\n            this.left = this.left;\n          } else {\n            this.left = Math.max(this.left + eventDelta, $containerWidth - $wrapperWidth - padding);\n          }\n        } else {\n          this.left = 0;\n        }\n      }\n    },\n    moveToTarget($target) {\n      const $container = this.$refs.scrollContainer;\n      const $containerWidth = $container.offsetWidth;\n      const $targetLeft = $target.offsetLeft;\n      const $targetWidth = $target.offsetWidth;\n\n      if ($targetLeft < -this.left) {\n        // tag in the left\n        this.left = -$targetLeft + padding\n      } else if ($targetLeft + padding > -this.left && $targetLeft + $targetWidth < -this.left + $containerWidth - padding) {\n        // tag in the current view\n        // eslint-disable-line\n      } else {\n        // tag in the right\n        this.left = -($targetLeft - ($containerWidth - $targetWidth) + padding);\n      }\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.scroll-container {\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n  .scroll-wrapper {\n    position: absolute;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ScrollPane/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"scrollContainer\",staticClass:\"scroll-container\",on:{\"wheel\":function($event){$event.preventDefault();_vm.handleScroll($event)}}},[_c('div',{ref:\"scrollWrapper\",staticClass:\"scroll-wrapper\",style:({left: _vm.left + 'px'})},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-0e29163e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/ScrollPane/index.vue\n// module id = null\n// module chunks = ","<template>\n    <div class='tags-view-container'>\n        <scroll-pane class=\"tags-view-wrapper\" ref=\"scrollPane\">\n            <router-link ref=\"tag\" class=\"tags-view-item\" :class=\"isActive(tag) ? 'active' : ''\"\n                         v-for=\"tag in Array.from(visitedViews)\"\n                         :to=\"tag.path\"\n                         :key=\"tag.path\"\n                         @contextmenu.prevent.native=\"openMenu(tag,$event)\">\n                {{generateTitle(tag.title)}}\n                <span class=\"el-icon-close\" @click.prevent.stop=\"closeSelectedTag(tag)\"></span>\n            </router-link>\n        </scroll-pane>\n        <ul class=\"contextmenu\" v-show=\"visible\" :style=\"{left: left+'px',top: top+'px'}\">\n            <li @click=\"closeSelectedTag(selectedTag)\">关闭</li>\n            <li @click=\"closeOthersTags\">关闭其它</li>\n            <li @click=\"closeAllTags\">关闭全部</li>\n        </ul>\n    </div>\n</template>\n\n<style lang='scss' scoped>\n    .tags-view-container{ min-height:50px !important; border-radius: 5px;box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); border-top: 4px solid #f44336; position:relative; z-index:2;\n        .tags-view-wrapper { background: #fff; height: 50px; border-bottom: 1px solid #d8dce5; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .12), 0 0 3px 0 rgba(0, 0, 0, .04);\n            display:flex; align-items:center;\n            .tags-view-item { display: inline-block; position: relative; height: 30px; line-height: 30px; border: 1px solid #d8dce5; text-decoration:none;\n                color: #495060; background: #fff; padding: 0 8px; font-size: 14px; margin-left: 5px; margin-top: 4px;\n                &:first-of-type { margin-left: 15px;}\n                &.active { background-color: #42b983; color: #fff; border-color: #42b983;\n                    &::before { content: ''; background: #fff; display: inline-block; width: 8px; height: 8px; border-radius: 50%; position: relative; margin-right: 2px;}\n                }\n                .el-icon-close { width: 16px; height: 16px; vertical-align: 2px; border-radius: 50%; text-align: center; transition: all .3s cubic-bezier(.645, .045, .355, 1);\n                    transform-origin: 100% 50%;\n                    &:before { transform: scale(.6); display: inline-block; vertical-align: -3px;}\n                    &:hover { background-color: #b4bccc; color: #fff;}\n                }\n            }\n        }\n        .contextmenu { margin: 0; background: #fff; z-index: 2; position: fixed; list-style-type: none; padding: 5px 0; border-radius: 4px;\n            font-size: 12px; font-weight: 400; color: #333; box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, .3);\n            li { margin: 0; padding: 7px 16px; cursor: pointer;\n                &:hover { background: #eee;}\n            }\n        }\n    }\n\n</style>\n\n<script>\n    import ScrollPane from '@/components/ScrollPane';\n    import { generateTitle } from '@/utils/i18n';\n    export default {\n        name: 'demo',\n        components: {ScrollPane},\n        data() {\n            return {\n                visible: false,\n                top: 0,\n                left: 0,\n                selectedTag: {}\n            }\n        },\n        computed: {\n            visitedViews(){\n                //visitedViews：路由数组\n                return this.$store.state.tagsView.visitedViews;\n            }\n        },\n        watch: {\n            $route(){\n                this.addViewTags();\n                this.moveToCurrentTag();\n            },\n            visible(value){\n                if(value){\n                    window.addEventListener('click',this.closeMenu);\n                }else{\n                    window.removeEventListener('click',this.closeMenu);\n                }\n            }\n        },\n        mounted(){\n            this.addViewTags();\n        },\n        methods: {\n            generateTitle,\n            generateRoute(){\n                if(this.$route.meta.title){\n                    return this.$route\n                }\n                return false;\n            },\n            isActive(route){\n                return route.path === this.$route.path || route.name === this.$route.meta.title;\n            },\n            addViewTags(){\n                const route = this.generateRoute();\n                if(!route){\n                    return false\n                }\n                this.$store.dispatch('addVisitedViews',route);\n            },\n            moveToCurrentTag(){\n                const tags = this.$refs.tag;\n                this.$nextTick(() => {\n                    for(const tag of tags){\n                        if(tag.to === this.$route.path){\n                            this.$refs.scrollPane.moveToTarget(tag.$el);\n                            break;\n                        }\n                    }\n                });\n            },\n            closeSelectedTag(view) {\n                this.$store.dispatch('delVisitedViews', view).then((views) => {\n                    if (this.isActive(view)) {\n                        const latestView = views.slice(-1)[0]\n                        if (latestView) {\n                            this.$router.push(latestView.path);\n                        } else {\n                            this.$router.push('/home')\n                        }\n                    }\n                    this.visible = false;\n                })\n            },\n            closeOthersTags() {\n                this.$router.push(this.selectedTag.path)\n                this.$store.dispatch('delOthersViews', this.selectedTag).then(() => {\n                    this.moveToCurrentTag();\n                    this.visible = false;\n                })\n            },\n            closeAllTags() {\n                this.$store.dispatch('delAllViews')\n                this.$router.push('/')\n                this.visible = false;\n            },\n            openMenu(tag, e){\n                console.log(e);\n                this.visible = true;\n                this.selectedTag = tag;\n                this.left = e.clientX;\n                this.top = e.clientY;\n            },\n            closeMenu() {\n                this.visible = false\n            }\n        }\n    }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/layout/components/TagsView.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e29163e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e29163e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0e29163e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ScrollPane/index.vue\n// module id = null\n// module chunks = ","// import i18n from '@/lang';\n// //定义全局函数\n// exports.install = function (Vue) {\n//     Vue.prototype.generateTitle = function(title){\n//         return i18n.t('route.'+title);\n//     }\n// }\nexport function generateTitle(title){\n    return this.$t('route.'+title);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/i18n.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tags-view-container\"},[_c('scroll-pane',{ref:\"scrollPane\",staticClass:\"tags-view-wrapper\"},_vm._l((Array.from(_vm.visitedViews)),function(tag){return _c('router-link',{key:tag.path,ref:\"tag\",refInFor:true,staticClass:\"tags-view-item\",class:_vm.isActive(tag) ? 'active' : '',attrs:{\"to\":tag.path},nativeOn:{\"contextmenu\":function($event){$event.preventDefault();_vm.openMenu(tag,$event)}}},[_vm._v(\"\\n            \"+_vm._s(_vm.generateTitle(tag.title))+\"\\n            \"),_c('span',{staticClass:\"el-icon-close\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.closeSelectedTag(tag)}}})])})),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"contextmenu\",style:({left: _vm.left+'px',top: _vm.top+'px'})},[_c('li',{on:{\"click\":function($event){_vm.closeSelectedTag(_vm.selectedTag)}}},[_vm._v(\"关闭\")]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.closeOthersTags}},[_vm._v(\"关闭其它\")]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.closeAllTags}},[_vm._v(\"关闭全部\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-399d9854\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/layout/components/TagsView.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-399d9854\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./TagsView.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./TagsView.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./TagsView.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-399d9854\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./TagsView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-399d9854\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/layout/components/TagsView.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}