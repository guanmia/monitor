webpackJsonp([11],{cRYf:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("PXce"),a=n("m77T"),o=n("C13K"),r=n("07y0"),s={props:["info","para"],data:function(){return{origin:"",once:!0,cityinfo:[]}},mounted:function(){var t=this;Object(r.c)().then(function(i){var n=t;i.data.forEach(function(t){t.children.forEach(function(t){n.cityinfo.push({cityname:t.location,cityid:t.location_id})})})})},watch:{para:function(){var t=this,i=this;"nodes"==this.info[0]?Object(e.d)(this.para[0]).then(function(n){t.origin=t.arrangement(n.data.client_city),t.cityinfo.forEach(function(t){t.cityname.indexOf(i.origin[0][0])>-1&&i.file(parseInt(t.cityid))}),t.once?(t.getCharts(),t.once=!1):t.change()}):Object(e.b)(this.para).then(function(i){i.data.length>0?(t.origin=t.arranged(i.data),t.once?(t.getCharts(),t.once=!1):t.change()):t.$message.error({message:"未获取到该城市节点文件数据！",center:!0})})}},methods:{arrangement:function(t){var i=[[],[]];return t.forEach(function(t){i[0].push(t.city_name),i[1].push(t.value)}),i},arranged:function(t){var i=[[],[]];return t.forEach(function(t){i[0].push(t.node_name),i[1].push(t.num)}),i},getCharts:function(){var t=this,i=this.$refs[this.info[0]],n=this.$echarts.init(i),e=["#404a59","#ccc","#fff","#ffe052","#2dffd8","#ff61ae","#2a333d","#76a3fe","#006ebd","#2cc08e","#ffb171","#ff687b"],a=[];a="nodes"==this.info[0]?[{offset:0,color:e[8]},{offset:1,color:e[9]}]:[{offset:0,color:e[10]},{offset:1,color:e[11]}];var o={title:{text:this.info[1],left:"center",top:"5%",textStyle:{color:e[2]}},backgroundColor:e[0],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{right:"4%",top:"16%",left:"8%",bottom:"12%"},xAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:e[1]}}},yAxis:{type:"category",name:this.info[2],axisLine:{lineStyle:{color:e[1]}},data:this.origin[0]},color:["#00a65a"],series:[{name:this.info[3],type:"bar",data:this.origin[1],itemStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,a)}},label:{normal:{show:!0,formatter:"{b}: {c}"}}}]};n.setOption(o,!0),this.change=function(){n.setOption({yAxis:{data:this.origin[0]},series:[{data:this.origin[1]}]})},"nodes"==this.info[0]&&n.on("click",function(i){t.cityinfo.forEach(function(n){n.cityname.indexOf(i.name)>-1&&t.file(parseInt(n.cityid))})})},file:function(t){var i={region_id:this.para[0],location_id:t};this.$emit("city",i)}}},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:this.info[0],staticStyle:{height:"400px",width:"50%"}})},staticRenderFns:[]};var f=n("X4nt")(s,c,!1,function(t){n("iEUU")},null,null).exports,l={name:"Chart",components:{Lines:a.a,Disk:o.a,Count:f},data:function(){return{linecpu:["cpu","CPU使用率","CPU使用率/100%"],linememory:["memory","内存使用量","内存使用量/MB"],lineout:["out","网络输出","网络输出/Mbps"],linein:["in","网络输入","网络输入/Mbps"],disk:["disk","磁盘信息","容量/GB"],nodes:["nodes","各城市节点数","节点城市","节点统计"],files:["files","节点文件统计","节点名","文件统计"],cityname:"",inter:[],options:"",fs:function(t,i){return Object(e.e)(t,i)}}},mounted:function(){var t=this;Object(e.a)().then(function(i){t.options=i.data.results,t.inter.push(i.data.results[0].id),t.inter.push(t.fs)})},methods:{fileNum:function(t){this.cityname=t},recalc:function(){Object(e.h)(this.inter[0]).then(function(t){}),this.inter.push("sign")}}},h={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"chart"},[n("button",{staticClass:"recalc",on:{click:t.recalc}},[t._v("重新获取数据")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.inter[0],expression:"inter[0]"}],staticClass:"selects",on:{change:function(i){var n=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.inter,0,i.target.multiple?n:n[0])}}},t._l(t.options,function(i){return n("option",{domProps:{value:i.id}},[t._v("\n          "+t._s(i.regionName)+"\n      ")])})),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linecpu,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linememory,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linein,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.lineout,para:t.inter}}),t._v(" "),n("disk",{attrs:{height:"300px",width:"100%",info:t.disk,para:t.inter}}),t._v(" "),n("count",{staticStyle:{float:"left"},attrs:{height:"400px",width:"100%",info:t.nodes,para:t.inter},on:{city:t.fileNum}}),t._v(" "),n("count",{staticStyle:{float:"right"},attrs:{height:"400px",width:"100%",info:t.files,para:t.cityname}})],1)},staticRenderFns:[]};var u=n("X4nt")(l,h,!1,function(t){n("dUsD")},"data-v-19557029",null);i.default=u.exports},dUsD:function(t,i){},iEUU:function(t,i){}});
//# sourceMappingURL=11.92f6901cd317113723a1.js.map