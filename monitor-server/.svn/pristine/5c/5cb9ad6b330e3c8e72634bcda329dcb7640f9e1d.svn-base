webpackJsonp([4,11],{"8IgE":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"Chart",components:{metadata:n("cRYf").default},data:function(){return{activeName:"first"}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tabs",{staticClass:"chart",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"metadata server状态",name:"first"}},[n("metadata")],1),t._v(" "),n("el-tab-pane",{attrs:{label:"storage gateway状态",name:"second"}},[t._v("storage gateway状态")]),t._v(" "),n("el-tab-pane",{attrs:{label:"本机状态",name:"third"}},[t._v("本机状态")])],1)},staticRenderFns:[]};var r=n("X4nt")(i,a,!1,function(t){n("o6am")},null,null);e.default=r.exports},cRYf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PXce"),a=n("m77T"),r=n("C13K"),o=n("07y0"),s={props:["info","para"],data:function(){return{origin:"",once:!0,cityinfo:[]}},mounted:function(){var t=this;Object(o.c)().then(function(e){var n=t;e.data.forEach(function(t){t.children.forEach(function(t){n.cityinfo.push({cityname:t.location,cityid:t.location_id})})})})},watch:{para:function(){var t=this,e=this;"nodes"==this.info[0]?Object(i.d)(this.para[0]).then(function(n){t.origin=t.arrangement(n.data.client_city),t.cityinfo.forEach(function(t){t.cityname.indexOf(e.origin[0][0])>-1&&e.file(parseInt(t.cityid))}),t.once?(t.getCharts(),t.once=!1):t.change()}):Object(i.b)(this.para).then(function(e){e.data.length>0?(t.origin=t.arranged(e.data),t.once?(t.getCharts(),t.once=!1):t.change()):t.$message.error({message:"未获取到该城市节点文件数据！",center:!0})})}},methods:{arrangement:function(t){var e=[[],[]];return t.forEach(function(t){e[0].push(t.city_name),e[1].push(t.value)}),e},arranged:function(t){var e=[[],[]];return t.forEach(function(t){e[0].push(t.node_name),e[1].push(t.num)}),e},getCharts:function(){var t=this,e=this.$refs[this.info[0]],n=this.$echarts.init(e),i=["#404a59","#ccc","#fff","#ffe052","#2dffd8","#ff61ae","#2a333d","#76a3fe","#006ebd","#2cc08e","#ffb171","#ff687b"],a=[];a="nodes"==this.info[0]?[{offset:0,color:i[8]},{offset:1,color:i[9]}]:[{offset:0,color:i[10]},{offset:1,color:i[11]}];var r={title:{text:this.info[1],left:"center",top:"5%",textStyle:{color:i[2]}},backgroundColor:i[0],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{right:"4%",top:"16%",left:"8%",bottom:"12%"},xAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:i[1]}}},yAxis:{type:"category",name:this.info[2],axisLine:{lineStyle:{color:i[1]}},data:this.origin[0]},color:["#00a65a"],series:[{name:this.info[3],type:"bar",data:this.origin[1],itemStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,a)}},label:{normal:{show:!0,formatter:"{b}: {c}"}}}]};n.setOption(r,!0),this.change=function(){n.setOption({yAxis:{data:this.origin[0]},series:[{data:this.origin[1]}]})},"nodes"==this.info[0]&&n.on("click",function(e){t.cityinfo.forEach(function(n){n.cityname.indexOf(e.name)>-1&&t.file(parseInt(n.cityid))})})},file:function(t){var e={region_id:this.para[0],location_id:t};this.$emit("city",e)}}},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:this.info[0],staticStyle:{height:"400px",width:"50%"}})},staticRenderFns:[]};var f=n("X4nt")(s,c,!1,function(t){n("iEUU")},null,null).exports,l={name:"Chart",components:{Lines:a.a,Disk:r.a,Count:f},data:function(){return{linecpu:["cpu","CPU使用率","CPU使用率/100%"],linememory:["memory","内存使用量","内存使用量/MB"],lineout:["out","网络输出","网络输出/Mbps"],linein:["in","网络输入","网络输入/Mbps"],disk:["disk","磁盘信息","容量/GB"],nodes:["nodes","各城市节点数","节点城市","节点统计"],files:["files","节点文件统计","节点名","文件统计"],cityname:"",inter:[],options:"",fs:function(t,e){return Object(i.e)(t,e)}}},mounted:function(){var t=this;Object(i.a)().then(function(e){t.options=e.data.results,t.inter.push(e.data.results[0].id),t.inter.push(t.fs)})},methods:{fileNum:function(t){this.cityname=t},recalc:function(){Object(i.h)(this.inter[0]).then(function(t){}),this.inter.push("sign")}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart"},[n("button",{staticClass:"recalc",on:{click:t.recalc}},[t._v("重新获取数据")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.inter[0],expression:"inter[0]"}],staticClass:"selects",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.inter,0,e.target.multiple?n:n[0])}}},t._l(t.options,function(e){return n("option",{domProps:{value:e.id}},[t._v("\n          "+t._s(e.regionName)+"\n      ")])})),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linecpu,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linememory,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.linein,para:t.inter}}),t._v(" "),n("lines",{attrs:{height:"300px",width:"100%",info:t.lineout,para:t.inter}}),t._v(" "),n("disk",{attrs:{height:"300px",width:"100%",info:t.disk,para:t.inter}}),t._v(" "),n("count",{staticStyle:{float:"left"},attrs:{height:"400px",width:"100%",info:t.nodes,para:t.inter},on:{city:t.fileNum}}),t._v(" "),n("count",{staticStyle:{float:"right"},attrs:{height:"400px",width:"100%",info:t.files,para:t.cityname}})],1)},staticRenderFns:[]};var h=n("X4nt")(l,u,!1,function(t){n("dUsD")},"data-v-19557029",null);e.default=h.exports},dUsD:function(t,e){},iEUU:function(t,e){},o6am:function(t,e){}});
//# sourceMappingURL=4.f09af7b8021d7a38a86e.js.map