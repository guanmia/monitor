{"version":3,"sources":["webpack:///src/views/Region.vue","webpack:///./src/views/Region.vue?747f","webpack:///./src/views/Region.vue"],"names":["Region","validator","rules","idRule","trigger","ipRule","portRule","handler","status","getList","_iteratorNormalCompletion","x","_step","value","y","_step2","z","_step3","location","location_id","city","_this","this","data","locationList","_iteratorNormalCompletion4","item","_step4","item1","_step5","_iteratorNormalCompletion6","item2","_step6","push","_iteratorNormalCompletion7","item3","_step7","list","_this2","arr","results","total","val","_this3","id","dataForm","_this4","length","resetForm","_this5","then","catch","_this6","resetFields","views_Region","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","operate","$t","visible","closeOnClickModal","beforeClose","handleClose","on","update:visible","$event","ref","model","labelWidth","label","prop","callback","$$v","$set","expression","_v","_s","options","regionOptions","clearable","change","addressChange","_e","type","loading","saveLoading","click","saveForm","generateTitle","directives","name","rawName","icon","$store","getters","downloadLoading","handleDownload","checkRole","handleCreate","staticStyle","width","border","scopedSlots","_u","key","fn","scope","row","to","clientNum","_f","size","editRow","nativeOn","preventDefault","deleteRow","background","current-page","listQuery","page","page-sizes","page-size","limit","layout","size-change","handleSizeChange","current-change","handleCurrentChange","update:currentPage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.8c34c1f40b9229a4906f.js","sourcesContent":["<template>\n    <div class='region'>\n\n        <div class=\"dataForm\">\n            <el-dialog  :title=\"operate === 0 ? $t('region.createRegion') : $t('region.updateRegion')\" :visible.sync=\"visible\" :closeOnClickModal=\"false\" :beforeClose=\"handleClose\">\n                <el-form :model=\"dataForm\" ref=\"dataForm\" :rules=\"rules\" labelWidth=\"150px\">\n                    <el-form-item :label=\"$t('region.id')\" prop=\"id\">\n                        <el-input v-model=\"dataForm.id\" v-if=\"operate === 0\"></el-input>\n                        <p v-else>{{dataForm.id}}</p>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.regionName')\" prop=\"regionName\">\n                        <el-input v-model=\"dataForm.regionName\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.location')\" prop=\"location\">\n                        <el-cascader :options=\"regionOptions\" v-model=\"dataForm.location\" @change=\"addressChange\" clearable></el-cascader>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.dbIp')\" prop=\"dbIp\">\n                        <el-input v-model=\"dataForm.dbIp\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.dbPort')\" prop=\"dbPort\">\n                        <el-input v-model=\"dataForm.dbPort\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.msIp')\" prop=\"msIp\">\n                        <el-input v-model=\"dataForm.msIp\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.msPort')\" prop=\"msPort\">\n                        <el-input v-model=\"dataForm.msPort\"></el-input>\n                    </el-form-item>\n                    <el-form-item :label=\"$t('region.status')\" prop=\"status\" v-if='operate === 1'>\n                        <el-radio-group v-model=\"dataForm.status\">\n                            <el-radio :label=\"1\">{{$t('region.use')}}</el-radio>\n                            <el-radio :label=\"2\">{{$t('region.maintain')}}</el-radio>\n                            <el-radio :label=\"3\">{{$t('region.nonuse')}}</el-radio>\n                        </el-radio-group>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"saveForm\" :loading='saveLoading'>{{$t('table.save')}}</el-button>\n                        <el-button type=\"info\" @click=\"resetForm\">{{$t('table.cancel')}}</el-button>\n                    </el-form-item>\n                </el-form>\n            </el-dialog>\n        </div>\n\n        <div class=\"title\">\n            <h2>{{generateTitle('region')}}</h2>\n            <div class=\"search\">\n                <!-- <el-input v-model=\"search\" :placeholder=\"$t('region.search')\" :title=\"$t('region.search')\" prefixIcon=\"el-icon-search\" @keyup.enter.native=\"handleFilter\" clearable></el-input>\n                <el-button v-waves type=\"primary\" @click=\"handleFilter\" icon=\"el-icon-search\">{{$t('table.search')}}</el-button> -->\n                <el-button v-waves type=\"primary\" icon=\"el-icon-download\" :loading='$store.getters.downloadLoading' @click=\"handleDownload(list[0],list,$t('title')+'-'+generateTitle('region'))\">{{$t('table.export')}}</el-button>\n            </div>\n            <el-button v-waves type=\"primary\" @click=\"handleCreate\" icon=\"el-icon-plus\" v-if='this.checkRole()'>{{$t('table.add')}}</el-button>\n        </div>\n\n        <main class=\"lists\">\n            <el-table :data=\"list\" border style=\"width:100%\" v-loading=\"loading\">\n                <el-table-column prop=\"id\" :label=\"$t('region.id')\" width='80'></el-table-column>\n                <el-table-column prop=\"regionName\" :label=\"$t('region.regionName')\"></el-table-column>\n                <!-- <el-table-column :label=\"$t('region.location')\" width=\"200\">\n                    <template slot-scope=\"scope\">\n                        <span>{{scope.row.location[0]}} {{scope.row.location[1]}} {{scope.row.location[2]}}</span>\n                        <span>{{scope.row.regionStreet}}</span>\n                    </template>\n                </el-table-column> -->\n                <el-table-column prop=\"location\" :label=\"$t('region.location')\">\n                  <template slot-scope='scope'>\n                    {{scope.row.location[0] ? scope.row.location[0].label : \"\"}} \n                    {{scope.row.location[1] ? scope.row.location[1].label : \"\"}} \n                    {{scope.row.location[2] ? scope.row.location[2].label : \"\"}} \n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"dbIp\" :label=\"$t('region.dbIp')\"></el-table-column>\n                <el-table-column prop=\"dbPort\" :label=\"$t('region.dbPort')\"></el-table-column>\n                <el-table-column prop=\"msIp\" :label=\"$t('region.msIp')\"></el-table-column>\n                <el-table-column prop=\"msPort\" :label=\"$t('region.msPort')\"></el-table-column>\n                <el-table-column prop=\"clientNum\" :label=\"$t('region.clientNum')\">\n                    <template slot-scope=\"scope\">\n                        <router-link to=\"/center/client\">\n                            <el-button type=\"text\">{{scope.row.clientNum}}</el-button>\n                        </router-link>\n                    </template>\n                </el-table-column>\n                <!-- <el-table-column prop=\"storageAgencyNum\" :label=\"$t('region.storageAgencyNum')\">\n                    <template slot-scope=\"scope\">\n                        <router-link :to=\"{name: 'storage-agency',params: {region_id: scope.row.id}}\">\n                            <el-button type=\"text\">{{scope.row.storageAgencyNum}}</el-button>\n                        </router-link>\n                    </template>\n                </el-table-column> -->\n                <!--<el-table-column prop=\"storageServerNum\" label=\"存储服务器数量\"></el-table-column>-->\n                <el-table-column prop=\"status\" :label=\"$t('region.status')\">\n                    <template slot-scope=\"scope\">\n                      <el-tag :type=\"scope.row.status | statusFilter\">{{scope.row.status === 1 ? $t('region.use') : (scope.row.status === 2 ? $t('region.maintain') : $t('region.nonuse'))}}</el-tag>\n                    </template>\n                </el-table-column>\n                <el-table-column :label=\"$t('region.actions')\" width=\"200\" v-if='checkRole()'>\n                    <template slot-scope=\"scope\">\n                        <el-button type=\"primary\" size=\"mini\" @click=\"editRow(scope.row.id)\" icon=\"el-icon-edit\">{{$t('table.edit')}}</el-button>\n                        <el-button type=\"danger\" size=\"mini\" @click.native.prevent=\"deleteRow(scope.row.id)\" icon=\"el-icon-delete\">{{$t('table.delete')}}</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </main>\n\n        <div class=\"page\">\n            <el-pagination\n                background\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page.sync=\"listQuery.page\"\n                :page-sizes=\"[10,20,50,100]\"\n                :page-size=\"listQuery.limit\"\n                layout=\"total,sizes,prev,pager,next,jumper\"\n                :total=\"total\">\n            </el-pagination>\n        </div>\n\n    </div>\n</template>\n\n<style lang='scss'>\n.region {\n}\n</style>\n\n<script>\nimport rules from \"@/base/rules\";\nimport {\n  getRegionList,\n  createRegion,\n  getRegionInfo,\n  updateRegion,\n  deleteRegion,\n  getLocation\n} from \"@/api/region\";\nexport default {\n  name: \"region\",\n  components: {},\n  data() {\n    return {\n      //表格数据\n      list: [], //表格数据\n      total: null, //数据总数\n      locationList: [], //区域地址数据\n      //表单数据\n      dataForm: {\n        id: null,\n        regionName: \"\",\n        location: [],\n        location_id: null,\n        dbIp: \"\",\n        dbPort: \"\",\n        msIp: \"\",\n        msPort: \"\",\n        status: 1\n      },\n      visible: false, //表单显示与隐藏\n      regionOptions: [], //中国省市区三级联级联选择器\n      editIndex: 0, //点击修改的是哪个索引\n      operate: 0, //判断用户是添加（0）还是修改数据（1）\n      loading: true, //数据加载\n      saveLoading: false, //保存按钮的加载\n      //查询条件\n      search: \"\", //用于把字符串转化为对象内容作为请求数据参数\n      listQuery: {\n        // searchkeys: {\n        //   regionName: []\n        // },\n        page: 1, //当前页\n        limit: 20 //一页多少条记录\n      },\n      //表单验证\n      rules: {\n        id: [\n          {\n            required: true,\n            message: this.$t(\"region.idMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.idRule, trigger: \"blur\" }\n        ],\n        regionName: [\n          {\n            required: true,\n            message: this.$t(\"region.regionNameMsg\"),\n            trigger: \"blur\"\n          }\n        ],\n        location: [\n          {\n            required: true,\n            message: this.$t(\"region.locationMsg\"),\n            trigger: \"blur\"\n          }\n        ],\n        //regionStreet: [{ required: true, message: \"详细地址不能为空！\", trigger: \"blur\" }],\n        dbIp: [\n          {\n            required: true,\n            message: this.$t(\"region.dbIpMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.ipRule, trigger: \"blur\" }\n        ],\n        dbPort: [\n          {\n            required: true,\n            message: this.$t(\"region.dbPortMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.portRule, trigger: \"blur\" }\n        ],\n        msIp: [\n          {\n            required: true,\n            message: this.$t(\"region.msIpMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.ipRule, trigger: \"blur\" }\n        ],\n        msPort: [\n          {\n            required: true,\n            message: this.$t(\"region.msPortMsg\"),\n            trigger: \"blur\"\n          },\n          { validator: rules.portRule, trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  directives: {\n    //输入数字管道\n    numberOnly: {\n      bind(el) {\n        this.handler = () => {\n          el.value = el.value.replace(/\\D+/, \"\");\n        };\n        el.addEventListener(\"input\", el.handler);\n      },\n      unbind(el) {\n        el.removeEventListener(\"input\", el.handler);\n      }\n    }\n  },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        1: \"success\",\n        2: \"warning\",\n        3: \"danger\"\n      };\n      return statusMap[status];\n    },\n    statusFilter1(status) {\n      //console.log(this.loading);\n      const statusMap = {\n        1: \"使用\",\n        2: \"维护\",\n        3: \"停用\"\n      };\n      return statusMap[status];\n    }\n  },\n  created() {\n    //获取表格数据\n    this.getList();\n  },\n  methods: {\n    //获取中国省市区三级联级联选择器格式化\n    getLocations(locations) {\n      for (let x of locations) {\n        //获取省份\n        let city = [];\n        for (let y of x.children) {\n          //获取城市\n          let area = [];\n          for (let z of y.children) {\n            //获取地区\n            area.push({ value: z.location_id, label: z.location });\n          }\n          city.push({\n            value: y.location_id,\n            label: y.location,\n            //children: area\n          });\n        }\n        this.regionOptions.push({\n          value: x.location_id,\n          label: x.location,\n          children: city\n        });\n      }\n    },\n    //三级联地址改变\n    addressChange(value) {\n      this.dataForm.location = value;\n    },\n    //获取全部省市区域\n    getLocation(list) {\n      getLocation().then(res => {\n        if (res.error_code === 0) {\n          this.locationList = res.data;\n\n          this.getLocations(this.locationList);\n\n          for (let item of list) {\n            item.location = [];\n            //省份\n            for (let item1 of this.locationList) {\n              if (item.location_id === item1.location_id) {\n                item.location.push({\n                  value: item1.location_id,\n                  label: item1.location\n                });\n              } else {\n                //城市\n                for (let item2 of item1.children) {\n                  if (item.location_id === item2.location_id) {\n                    item.location.push(\n                      {\n                        value: item1.location_id,\n                        label: item1.location\n                      },\n                      {\n                        value: item2.location_id,\n                        label: item2.location\n                      }\n                    );\n                  } else {\n                    //区域\n                    for (let item3 of item2.children) {\n                      if (item.location_id === item3.location_id) {\n                        //item.location.push(item1.location, item2.location, item3.location);\n                        item.location.push(\n                          {\n                            value: item1.location_id,\n                            label: item1.location\n                          },\n                          {\n                            value: item2.location_id,\n                            label: item2.location\n                          },\n                          {\n                            value: item3.location_id,\n                            label: item3.location\n                          }\n                        );\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          //console.log(list[0].location);\n\n          this.list = list;\n        }\n      });\n    },\n    //获取数据\n    getList() {\n      this.loading = true;\n\n      //转化regionName对象\n      if (this.search !== \"\") {\n        let arr = this.search.split(\" \");\n        this.listQuery.searchkeys.regionName = arr;\n      }\n\n      getRegionList(this.listQuery).then(res => {\n        if (res.error_code === 0) {\n          let list = res.data.results;\n          //this.list = list;\n\n          this.getLocation(list);\n\n          this.total = res.data.total;\n          this.loading = false;\n        }\n      });\n    },\n    //点击查询\n    handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n    //每页多少条记录改变\n    handleSizeChange(val) {\n      this.listQuery.limit = val;\n      this.getList();\n    },\n    //当前页改变\n    handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.getList();\n    },\n    //点击添加数据\n    handleCreate() {\n      this.visible = true;\n      this.operate = 0;\n    },\n    //点击更新数据，获取区域信息\n    editRow(id) {\n      this.editIndex = id;\n      getRegionInfo({ id }).then(res => {\n        if (res.error_code === 0) {\n          this.dataForm = res.data;\n\n          //设置location\n          this.dataForm.location = [];\n          this.list.forEach(item => {\n            if (this.dataForm.location_id === item.location_id) {\n              item.location.forEach(item => {\n                this.dataForm.location.push(item.value);\n              });\n            }\n          });\n          console.log(this.dataForm);\n\n          this.operate = 1;\n          this.visible = true;\n        }\n      });\n    },\n    //保存数据\n    saveForm() {\n      this.$refs.dataForm.validate(valid => {\n        if (valid) {\n          //保存按钮的加载，禁止用户快速连续点击两次问题\n          this.saveLoading = true;\n\n          //把location转换成location_id\n          this.dataForm.location_id = this.dataForm.location[\n            this.dataForm.location.length - 1\n          ];\n          //console.log(this.dataForm);\n\n          if (this.operate === 0) {\n            //添加数据\n            createRegion(this.dataForm).then(res => {\n              if (res.error_code === 0) {\n                this.$notify({\n                  title: this.$t(\"table.success\"),\n                  message: this.$t(\"table.createSuccess\"),\n                  type: \"success\",\n                  duration: 2000\n                });\n                this.getList();\n                this.resetForm();\n              }\n            });\n          } else if (this.operate === 1) {\n            //更新数据\n            updateRegion(this.dataForm).then(res => {\n              if (res.error_code === 0) {\n                this.$notify({\n                  title: this.$t(\"table.success\"),\n                  message: this.$t(\"table.updateSuccess\"),\n                  type: \"success\",\n                  duration: 2000\n                });\n                this.getList();\n                this.resetForm();\n              }\n            });\n          }\n        }\n      });\n    },\n    //删除数据\n    deleteRow(id) {\n      this.$confirm(this.$t(\"table.deleteNote\"), this.$t(\"table.note\"), {\n        confirmButtonText: this.$t(\"table.delete\"),\n        cancelButtonText: this.$t(\"table.cancel\"),\n        type: \"warning\"\n      })\n        .then(() => {\n          deleteRegion({ id }).then(res => {\n            if (res.error_code === 0) {\n              this.$notify({\n                title: this.$t(\"table.success\"),\n                message: this.$t(\"table.deleteSuccess\"),\n                type: \"success\",\n                duration: 2000\n              });\n              this.getList();\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    //关闭表单，并重置表单\n    handleClose() {\n      this.resetForm();\n    },\n    //重置并退出\n    resetForm() {\n      setTimeout(() => {\n        //解决移除校验结果，不能解决第一次点击编辑，初始化问题\n        this.$refs.dataForm.resetFields();\n        //解决第一次点击编辑，初始化问题\n        this.dataForm = {\n          id: null,\n          regionName: \"\",\n          location: [],\n          location_id: null,\n          dbIp: \"\",\n          dbPort: \"\",\n          msIp: \"\",\n          msPort: \"\",\n          status: 1\n        };\n      }, 500);\n      this.visible = false;\n      //保存按钮启动\n      this.saveLoading = false;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Region.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"region\"},[_c('div',{staticClass:\"dataForm\"},[_c('el-dialog',{attrs:{\"title\":_vm.operate === 0 ? _vm.$t('region.createRegion') : _vm.$t('region.updateRegion'),\"visible\":_vm.visible,\"closeOnClickModal\":false,\"beforeClose\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.rules,\"labelWidth\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('region.id'),\"prop\":\"id\"}},[(_vm.operate === 0)?_c('el-input',{model:{value:(_vm.dataForm.id),callback:function ($$v) {_vm.$set(_vm.dataForm, \"id\", $$v)},expression:\"dataForm.id\"}}):_c('p',[_vm._v(_vm._s(_vm.dataForm.id))])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.regionName'),\"prop\":\"regionName\"}},[_c('el-input',{model:{value:(_vm.dataForm.regionName),callback:function ($$v) {_vm.$set(_vm.dataForm, \"regionName\", $$v)},expression:\"dataForm.regionName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.location'),\"prop\":\"location\"}},[_c('el-cascader',{attrs:{\"options\":_vm.regionOptions,\"clearable\":\"\"},on:{\"change\":_vm.addressChange},model:{value:(_vm.dataForm.location),callback:function ($$v) {_vm.$set(_vm.dataForm, \"location\", $$v)},expression:\"dataForm.location\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.dbIp'),\"prop\":\"dbIp\"}},[_c('el-input',{model:{value:(_vm.dataForm.dbIp),callback:function ($$v) {_vm.$set(_vm.dataForm, \"dbIp\", $$v)},expression:\"dataForm.dbIp\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.dbPort'),\"prop\":\"dbPort\"}},[_c('el-input',{model:{value:(_vm.dataForm.dbPort),callback:function ($$v) {_vm.$set(_vm.dataForm, \"dbPort\", $$v)},expression:\"dataForm.dbPort\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.msIp'),\"prop\":\"msIp\"}},[_c('el-input',{model:{value:(_vm.dataForm.msIp),callback:function ($$v) {_vm.$set(_vm.dataForm, \"msIp\", $$v)},expression:\"dataForm.msIp\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('region.msPort'),\"prop\":\"msPort\"}},[_c('el-input',{model:{value:(_vm.dataForm.msPort),callback:function ($$v) {_vm.$set(_vm.dataForm, \"msPort\", $$v)},expression:\"dataForm.msPort\"}})],1),_vm._v(\" \"),(_vm.operate === 1)?_c('el-form-item',{attrs:{\"label\":_vm.$t('region.status'),\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.dataForm.status),callback:function ($$v) {_vm.$set(_vm.dataForm, \"status\", $$v)},expression:\"dataForm.status\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(_vm._s(_vm.$t('region.use')))]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(_vm._s(_vm.$t('region.maintain')))]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(_vm._s(_vm.$t('region.nonuse')))])],1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.saveForm}},[_vm._v(_vm._s(_vm.$t('table.save')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.resetForm}},[_vm._v(_vm._s(_vm.$t('table.cancel')))])],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_c('h2',[_vm._v(_vm._s(_vm.generateTitle('region')))]),_vm._v(\" \"),_c('div',{staticClass:\"search\"},[_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\",\"loading\":_vm.$store.getters.downloadLoading},on:{\"click\":function($event){_vm.handleDownload(_vm.list[0],_vm.list,_vm.$t('title')+'-'+_vm.generateTitle('region'))}}},[_vm._v(_vm._s(_vm.$t('table.export')))])],1),_vm._v(\" \"),(this.checkRole())?_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(_vm._s(_vm.$t('table.add')))]):_vm._e()],1),_vm._v(\" \"),_c('main',{staticClass:\"lists\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":_vm.$t('region.id'),\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"regionName\",\"label\":_vm.$t('region.regionName')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"location\",\"label\":_vm.$t('region.location')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(scope.row.location[0] ? scope.row.location[0].label : \"\")+\" \\n                \"+_vm._s(scope.row.location[1] ? scope.row.location[1].label : \"\")+\" \\n                \"+_vm._s(scope.row.location[2] ? scope.row.location[2].label : \"\")+\" \\n              \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"dbIp\",\"label\":_vm.$t('region.dbIp')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"dbPort\",\"label\":_vm.$t('region.dbPort')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"msIp\",\"label\":_vm.$t('region.msIp')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"msPort\",\"label\":_vm.$t('region.msPort')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"clientNum\",\"label\":_vm.$t('region.clientNum')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":\"/center/client\"}},[_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(_vm._s(scope.row.clientNum))])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":_vm.$t('region.status')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusFilter\")(scope.row.status)}},[_vm._v(_vm._s(scope.row.status === 1 ? _vm.$t('region.use') : (scope.row.status === 2 ? _vm.$t('region.maintain') : _vm.$t('region.nonuse'))))])]}}])}),_vm._v(\" \"),(_vm.checkRole())?_c('el-table-column',{attrs:{\"label\":_vm.$t('region.actions'),\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.editRow(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('table.edit')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.deleteRow(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('table.delete')))])]}}])}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.listQuery.page,\"page-sizes\":[10,20,50,100],\"page-size\":_vm.listQuery.limit,\"layout\":\"total,sizes,prev,pager,next,jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.listQuery, \"page\", $event)}}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-0b86b600\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/Region.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b86b600\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./Region.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Region.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Region.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b86b600\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./Region.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Region.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}